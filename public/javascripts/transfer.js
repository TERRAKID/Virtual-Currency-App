const baseUrl=window.location.protocol+"//"+window.location.host;let btnConfirm=document.querySelector(".btn--confirm");fetch(baseUrl+"/api/v1/currency/transfers",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(e=>e.json()).then(e=>{}).catch(e=>{logout()}),logout=()=>{localStorage.removeItem("token"),window.location.href="/login"},btnConfirm.addEventListener("click",()=>{let e=document.querySelector("#to").value,t=document.querySelector("#amount").value,o=document.querySelector("#reason").value,n=document.querySelector("#message").value;fetch(baseUrl+"/api/v1/currency/transfers",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify({to:e,amount:t,reason:o,message:n})}).then(e=>e.json()).then(r=>{"success"===r.status&&deductCurrency(e,t,o,n)}).catch(e=>{logout()})}),addCurrency=(e,t,o,n)=>{fetch(baseUrl+"/api/v1/currency/addcurrency",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify({to:e,amount:t})}).then(e=>e.json()).then(e=>{window.location.href="/"}).catch(e=>{logout()})},deductCurrency=(e,t,o,n)=>{fetch(baseUrl+"/api/v1/currency/deductcurrency",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify({amount:t})}).then(e=>e.json()).then(r=>{"success"===r.status&&addCurrency(e,t,o,n)}).catch(e=>{logout()})};